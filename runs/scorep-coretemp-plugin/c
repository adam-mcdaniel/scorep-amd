# # SCOREP_VERSION="9.0"
# # TOOLSROOT="/ccs/proj/gen010/tools/install"
# # PRGENV_NAME="cray"
# # PRGENV_VERSION="8.6.0"
# # CRAY_CPE_VERSION="24.11"
# # ROCM_VERSION="6.2.4"
# # PAPI_VERSION="7.2.0b1"
# # CPE_ACCEL_SUPPORT=0
# # SCOREP_HOME="${TOOLSROOT}/scorep-${SCOREP_VERSION}-PrgEnv-${PRGENV_NAME}-${PRGENV_VERSION}-cpe-${CRAY_CPE_VERSION}-rocm-${ROCM_VERSION}-papi-${PAPI_VERSION}"
# export SCOREP_HOME=~/scorep/install
# export PAPI_INSTALL_DIR="~/papi"

# export PATH=$SCOREP_HOME/bin:$PATH
# export LD_LIBRARY_PATH=$SCOREP_HOME/lib:$LD_LIBRARY_PATH
# export PREFIX=$SCOREP_HOME

if [ -z "$INSTALL_DIR" ]; then
    echo "The INSTALL_DIR is not set."
    echo "Please set the INSTALL_DIR environment variable to the install/ directory"
    echo "generated by the `build-scorep.sh` script."
    exit 1
fi
source $INSTALL_DIR/../setup-env.sh
if [ $? -ne 0 ]; then
    echo "Failed to source the setup-env.sh relative to INSTALL_DIR."
    exit 1
fi
cmake .. -DPAPI_ROOT=$INSTALL_DIR -DCMAKE_INSTALL_PREFIX=$INSTALL_DIR
echo "Installing to $INSTALL_DIR"
gmake clean
gmake
gmake install